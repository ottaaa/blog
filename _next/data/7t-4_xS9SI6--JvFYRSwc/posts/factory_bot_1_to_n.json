{"pageProps":{"postData":{"id":"factory_bot_1_to_n","contentHtml":"<h2>結論</h2>\n<pre><code class=\"language-ruby\">FactoryBot.define do\n  factory :post do\n    title { \"Through the Looking Glass\" }\n    user\n  end\n\n  factory :user do\n    name { \"Rachel Sanchez\" }\n  end\nend\n\ndef user_with_posts(posts_count: 5)\n  FactoryBot.create(:user) do |user|\n    FactoryBot.create_list(:post, posts_count, user: user)\n  end\nend\n</code></pre>\n<p>下記から引用(2021-05-07)<br>\nhttps://github.com/thoughtbot/factory_bot/blob/master/GETTING_STARTED.md#has_many-associations</p>\n<h2>経緯</h2>\n<pre><code class=\"language-ruby\">FactoryBot.create_list(:post, 3, user: FactoryBot.create(:user)) \n</code></pre>\n<p>当初上記の書き方をしていた。<br>\n各postにつき別々のuserが関連づけられると想定していたが、共通した親が関連づけられる。</p>\n<pre><code>FactoryBot.create(:user) do |user|\n  FactoryBot.create_list(:post, posts_count, user: user)\nend\n</code></pre>\n<p>引用のこの部分の実装で、子ごとに別々の親をもつモデルを作成できる。</p>\n","title":"FactoryBotで親子関係にあるモデルを複数作成する(子ごとに別々の親)","date":"2021-05-08"}},"__N_SSG":true}